{
  "workflows": {
    "legal_expert_consultation": {
      "name": "专业法律咨询工作流",
      "description": "智能法律咨询主工作流",
      "version": "1.0",
      "nodes": [
        {
          "id": "intent_analysis",
          "type": "llm",
          "name": "意图分析",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "分析用户法律咨询的意图类型：{user_message}\n\n返回JSON格式：\n{\n  \"type\": \"case_analysis|contract_review|legal_research|general_consultation\",\n  \"urgency\": \"high|medium|low\",\n  \"domain\": \"civil|commercial|criminal|labor|property\",\n  \"key_entities\": [...]\n}"
          }
        },
        {
          "id": "route_to_specialist",
          "type": "condition_router",
          "name": "路由到专业工作流",
          "config": {
            "routes": {
              "case_analysis": "case_analysis_workflow",
              "contract_review": "contract_review_workflow",
              "legal_research": "legal_research_workflow",
              "general_consultation": "general_consultation_workflow"
            }
          }
        }
      ]
    },

    "case_analysis_workflow": {
      "name": "案件分析工作流",
      "description": "专业的法律案件分析和评估",
      "nodes": [
        {
          "id": "case_info_extraction",
          "type": "llm",
          "name": "案件信息提取",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "从用户描述中提取案件关键信息：{user_message}\n\n提取：当事人、争议焦点、时间地点、相关证据、诉讼请求等"
          }
        },
        {
          "id": "legal_basis_search",
          "type": "knowledge_retrieval",
          "name": "法律依据检索",
          "config": {
            "knowledge_base_id": "legal_statutes_kb",
            "retrieval_config": {
              "top_k": 5,
              "similarity_threshold": 0.7
            }
          }
        },
        {
          "id": "case_analysis",
          "type": "llm",
          "name": "案件分析生成",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "基于案件信息和法律依据，进行专业分析：\n案件信息：{case_info}\n相关法条：{legal_basis}\n\n生成：案件性质分析、法律关系认定、权利义务分析、争议焦点判断"
          }
        },
        {
          "id": "risk_assessment",
          "type": "llm",
          "name": "风险评估",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "评估案件的法律风险：{case_analysis}\n\n评估：胜诉可能性、主要风险点、时间成本、经济成本"
          }
        },
        {
          "id": "strategy_recommendation",
          "type": "llm",
          "name": "策略建议",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "基于分析结果提供策略建议：{analysis_result}\n\n建议：解决方案、证据准备、程序选择、谈判策略"
          }
        }
      ]
    },

    "contract_review_workflow": {
      "name": "合同审查工作流",
      "description": "专业的合同条款审查和风险评估",
      "nodes": [
        {
          "id": "contract_type_identification",
          "type": "llm",
          "name": "合同类型识别",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "识别合同类型：{user_message}\n\n返回：劳动合同、买卖合同、服务合同、租赁合同、技术合同等"
          }
        },
        {
          "id": "key_terms_extraction",
          "type": "llm",
          "name": "关键条款提取",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "提取合同关键条款：{contract_content}\n\n提取：当事人、标的物、价款、履行方式、违约责任、争议解决等"
          }
        },
        {
          "id": "clause_risk_check",
          "type": "knowledge_retrieval",
          "name": "条款风险检查",
          "config": {
            "knowledge_base_id": "contract_risks_kb",
            "retrieval_config": {
              "top_k": 10,
              "similarity_threshold": 0.6
            }
          }
        },
        {
          "id": "risk_analysis_report",
          "type": "llm",
          "name": "风险分析报告",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "生成合同风险分析报告：\n条款信息：{key_terms}\n风险点：{risk_points}\n\n报告格式：风险等级、具体风险、修改建议、法律依据"
          }
        }
      ]
    },

    "legal_research_workflow": {
      "name": "法律检索工作流",
      "description": "专业的法律法规和判例检索",
      "nodes": [
        {
          "id": "search_query_generation",
          "type": "llm",
          "name": "检索查询生成",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "根据用户问题生成法律检索查询：{user_message}\n\n生成：关键词组合、法律领域、时间范围、管辖层级"
          }
        },
        {
          "id": "statute_search",
          "type": "knowledge_retrieval",
          "name": "法规检索",
          "config": {
            "knowledge_base_id": "legal_statutes_kb",
            "retrieval_config": {
              "top_k": 8,
              "similarity_threshold": 0.7
            }
          }
        },
        {
          "id": "case_search",
          "type": "knowledge_retrieval",
          "name": "判例检索",
          "config": {
            "knowledge_base_id": "legal_cases_kb",
            "retrieval_config": {
              "top_k": 5,
              "similarity_threshold": 0.6
            }
          }
        },
        {
          "id": "research_synthesis",
          "type": "llm",
          "name": "研究综合",
          "config": {
            "model": "deepseek-chat",
            "prompt_template": "综合法律研究结果：\n相关法规：{statutes}\n类似判例：{cases}\n\n提供：法律依据汇总、适用性分析、实践趋势"
          }
        }
      ]
    }
  },

  "knowledge_bases": {
    "legal_statutes_kb": {
      "name": "法律法规库",
      "description": "包含各种法律条文和司法解释",
      "embeddings_model": "text-embedding-3-small"
    },
    "contract_risks_kb": {
      "name": "合同风险库",
      "description": "常见合同风险点和审查要点",
      "embeddings_model": "text-embedding-3-small"
    },
    "legal_cases_kb": {
      "name": "判例库",
      "description": "典型法律案例和判决书",
      "embeddings_model": "text-embedding-3-small"
    }
  }
}