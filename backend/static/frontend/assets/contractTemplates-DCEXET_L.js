import{a as l}from"./index-sxRqSD8J.js";const g="",a=l.create({baseURL:g+"/api/v1",timeout:3e4});a.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken")||localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));a.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("accessToken"),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));const y={getContractTypeOptions:async()=>(await a.get("/contract/options/contract-types")).data,getTemplates:async(e={})=>{const t=new URLSearchParams;return Object.entries(e).forEach(([s,n])=>{n!=null&&(Array.isArray(n)?t.append(s,n.join(",")):t.append(s,String(n)))}),(await a.get(`/contract/?${t.toString()}`)).data},getTemplate:async e=>(await a.get(`/contract/${e}`)).data,uploadTemplate:async e=>(await a.post("/contract/upload",e,{headers:{"Content-Type":"multipart/form-data"}})).data,updateTemplate:async(e,t)=>(await a.put(`/contract/${e}`,t,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteTemplate:async e=>{await a.delete(`/contract/${e}`)},updateContractFeatures:async(e,t)=>{await a.put(`/contract/${e}/contract-features`,t)},getTemplateContent:async e=>(await a.get(`/contract/${e}/content`)).data,getTemplatePreview:async e=>(await a.get(`/contract/${e}/preview`)).data,rateTemplate:async(e,t)=>{await a.post(`/contract/${e}/rate`,{rating:t})},downloadTemplate:async e=>{const o=localStorage.getItem("accessToken")||localStorage.getItem("token"),s=`/api/v1/contract/${e}/download`,n=await fetch(s,{headers:{Authorization:`Bearer ${o}`}});if(!n.ok)throw new Error("下载失败");const d=await n.blob(),p=n.headers.get("Content-Disposition");let i="contract_template.docx";if(p){const c=p.match(/filename="?([^"]+)"?/);c&&c[1]&&(i=decodeURIComponent(c[1]))}const r=document.createElement("a");r.href=window.URL.createObjectURL(d),r.download=i,document.body.appendChild(r),r.click(),document.body.removeChild(r)},getCategoryTree:async(e=!1)=>(await a.get(`/categories/tree?include_inactive=${e}`)).data,createCategory:async e=>(await a.post("/categories/",e)).data,updateCategory:async(e,t)=>(await a.put(`/categories/${e}`,t)).data,deleteCategory:async e=>{await a.delete(`/categories/${e}`)},searchTemplates:async e=>(await a.post("/rag/retrieve",e)).data,getAllContractTypes:async()=>(await a.get("/knowledge-graph/contract-types")).data,searchContractTypes:async e=>(await a.post("/knowledge-graph/search-by-keywords",{query:e})).data,getLegalFeatures:async e=>(await a.get(`/knowledge-graph/legal-features/${encodeURIComponent(e)}`)).data,getContractTypesByCategory:async(e,t)=>{const o=t?`?subcategory=${encodeURIComponent(t)}`:"";return(await a.get(`/knowledge-graph/categories/${encodeURIComponent(e)}/contract-types${o}`)).data},createContractType:async e=>(await a.post("/knowledge-graph/admin/contract-types",e)).data,updateContractType:async(e,t)=>(await a.put(`/knowledge-graph/admin/contract-types/${encodeURIComponent(e)}`,t)).data,deleteContractType:async e=>(await a.delete(`/knowledge-graph/admin/contract-types/${encodeURIComponent(e)}`)).data,exportKnowledgeGraph:async()=>(await a.get("/knowledge-graph/admin/export")).data,syncFromCategories:async()=>(await a.post("/knowledge-graph/admin/sync-from-categories")).data,aiEnhanceLegalFeatures:async e=>(await a.post("/knowledge-graph/admin/ai-enhance",e,{timeout:6e5})).data,aiEnhanceSingleContract:async e=>(await a.post(`/knowledge-graph/admin/ai-enhance/${encodeURIComponent(e)}`,{},{timeout:6e4})).data,processExistingTemplates:async(e=!1)=>(await a.post("/knowledge-graph/admin/process-templates",null,{params:{force:e},timeout:3e5})).data};export{y as c};
