import{r,J as F,K as H,L as I,N as _,P as L,aN as B,aP as U,aQ as V,af as O,aR as X}from"./index-DsSH7ar9.js";const A=t=>{const{value:n,formatter:o,precision:e,decimalSeparator:a,groupSeparator:m="",prefixCls:i}=t;let c;if(typeof o=="function")c=o(n);else{const s=String(n),f=s.match(/^(-?)(\d*)(\.(\d+))?$/);if(!f||s==="-")c=s;else{const d=f[1];let p=f[2]||"0",u=f[4]||"";p=p.replace(/\B(?=(\d{3})+(?!\d))/g,m),typeof e=="number"&&(u=u.padEnd(e,"0").slice(0,e>0?e:0)),u&&(u=`${a}${u}`),c=[r.createElement("span",{key:"int",className:`${i}-content-value-int`},d,p),u&&r.createElement("span",{key:"decimal",className:`${i}-content-value-decimal`},u)]}}return r.createElement("span",{className:`${i}-content-value`},c)},J=t=>{const{componentCls:n,marginXXS:o,padding:e,colorTextDescription:a,titleFontSize:m,colorTextHeading:i,contentFontSize:c,fontFamily:s}=t;return{[n]:Object.assign(Object.assign({},I(t)),{[`${n}-title`]:{marginBottom:o,color:a,fontSize:m},[`${n}-skeleton`]:{paddingTop:e},[`${n}-content`]:{color:i,fontSize:c,fontFamily:s,[`${n}-content-value`]:{display:"inline-block",direction:"ltr"},[`${n}-content-prefix, ${n}-content-suffix`]:{display:"inline-block"},[`${n}-content-prefix`]:{marginInlineEnd:o},[`${n}-content-suffix`]:{marginInlineStart:o}}})}},K=t=>{const{fontSizeHeading3:n,fontSize:o}=t;return{titleFontSize:o,contentFontSize:n}},Q=F("Statistic",t=>{const n=H(t,{});return J(n)},K);var Y=function(t,n){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(t);a<e.length;a++)n.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(o[e[a]]=t[e[a]]);return o};const y=r.forwardRef((t,n)=>{const{prefixCls:o,className:e,rootClassName:a,style:m,valueStyle:i,value:c=0,title:s,valueRender:f,prefix:d,suffix:p,loading:u=!1,formatter:l,precision:g,decimalSeparator:S=".",groupSeparator:w=",",onMouseEnter:$,onMouseLeave:C}=t,N=Y(t,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:h,direction:j,className:T,style:k}=_("statistic"),v=h("statistic",o),[P,R,z]=Q(v),x=r.createElement(A,{decimalSeparator:S,groupSeparator:w,prefixCls:v,formatter:l,precision:g,value:c}),D=L(v,{[`${v}-rtl`]:j==="rtl"},T,e,a,R,z),b=r.useRef(null);r.useImperativeHandle(n,()=>({nativeElement:b.current}));const M=B(N,{aria:!0,data:!0});return P(r.createElement("div",Object.assign({},M,{ref:b,className:D,style:Object.assign(Object.assign({},k),m),onMouseEnter:$,onMouseLeave:C}),s&&r.createElement("div",{className:`${v}-title`},s),r.createElement(U,{paragraph:!1,loading:u,className:`${v}-skeleton`,active:!0},r.createElement("div",{style:i,className:`${v}-content`},d&&r.createElement("span",{className:`${v}-content-prefix`},d),f?f(x):x,p&&r.createElement("span",{className:`${v}-content-suffix`},p)))))}),q=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function G(t,n){let o=t;const e=/\[[^\]]*]/g,a=(n.match(e)||[]).map(s=>s.slice(1,-1)),m=n.replace(e,"[]"),i=q.reduce((s,[f,d])=>{if(s.includes(f)){const p=Math.floor(o/d);return o-=p*d,s.replace(new RegExp(`${f}+`,"g"),u=>{const l=u.length;return p.toString().padStart(l,"0")})}return s},m);let c=0;return i.replace(e,()=>{const s=a[c];return c+=1,s})}function W(t,n,o){const{format:e=""}=n,a=new Date(t).getTime(),m=Date.now(),i=Math.max(o?a-m:m-a,0);return G(i,e)}var Z=function(t,n){var o={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(t);a<e.length;a++)n.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(t,e[a])&&(o[e[a]]=t[e[a]]);return o};function ee(t){return new Date(t).getTime()}const E=t=>{const{value:n,format:o="HH:mm:ss",onChange:e,onFinish:a,type:m}=t,i=Z(t,["value","format","onChange","onFinish","type"]),c=m==="countdown",[s,f]=r.useState(null),d=V(()=>{const l=Date.now(),g=ee(n);f({});const S=c?g-l:l-g;return e?.(S),c&&g<l?(a?.(),!1):!0});r.useEffect(()=>{let l;const g=()=>O.cancel(l),S=()=>{l=O(()=>{d()&&S()})};return S(),g},[n,c]),r.useEffect(()=>{f({})},[]);const p=(l,g)=>s?W(l,Object.assign(Object.assign({},g),{format:o}),c):"-",u=l=>X(l,{title:void 0});return r.createElement(y,Object.assign({},i,{value:n,valueRender:u,formatter:p}))},te=t=>r.createElement(E,Object.assign({},t,{type:"countdown"})),ne=r.memo(te);y.Timer=E;y.Countdown=ne;export{y as S};
