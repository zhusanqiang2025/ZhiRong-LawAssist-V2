{"openapi":"3.1.0","info":{"title":"æ³å¾æä¹¦çæå©æ API","description":"ä¸ä¸çæ³å¾æä¹¦çæååæå¹³å°","version":"3.0.0"},"paths":{"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login For Access Token","description":"OAuth2 compatible token login, get an access token for future requests","operationId":"login_for_access_token_api_v1_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_v1_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register","description":"æ³¨åæ°ç¨æ·","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/test-token":{"post":{"tags":["auth"],"summary":"Test Token","description":"æµè¯è®¿é®ä»¤ç","operationId":"test_token_api_v1_auth_test_token_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/contract/upload":{"post":{"tags":["Contract Review System"],"summary":"Upload Contract","operationId":"upload_contract_api_contract_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_contract_api_contract_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractDocOut"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/contract/{contract_id}/extract-metadata":{"post":{"tags":["Contract Review System"],"summary":"Extract Metadata","operationId":"extract_metadata_api_contract__contract_id__extract_metadata_post","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"integer","title":"Contract Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/contract/{contract_id}/deep-review":{"post":{"tags":["Contract Review System"],"summary":"Start Deep Review","operationId":"start_deep_review_api_contract__contract_id__deep_review_post","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"integer","title":"Contract Id"}},{"name":"stance","in":"query","required":false,"schema":{"type":"string","default":"ç²æ¹","title":"Stance"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}],"title":"Updated Metadata"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/contract/{contract_id}/review-results":{"get":{"tags":["Contract Review System"],"summary":"Get Review Results","operationId":"get_review_results_api_contract__contract_id__review_results_get","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"integer","title":"Contract Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/contract/{contract_id}/onlyoffice-config":{"get":{"tags":["Contract Review System"],"summary":"Get Onlyoffice Config","operationId":"get_onlyoffice_config_api_contract__contract_id__onlyoffice_config_get","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"integer","title":"Contract Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/contract/{contract_id}/run-graph":{"post":{"tags":["Contract Review System"],"summary":"Run Graph","description":"PoC è·¯ç±ï¼å° LangGraph PoC Runner ä»¥åå°ä»»å¡æ¹å¼è°åº¦æ§è¡ï¼ç«å³è¿å 202ã","operationId":"run_graph_api_contract__contract_id__run_graph_post","parameters":[{"name":"contract_id","in":"path","required":true,"schema":{"type":"integer","title":"Contract Id"}}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","description":"API æ ¹ç«¯ç¹","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"å¥åº·æ£æ¥ç«¯ç¹","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_login_for_access_token_api_v1_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_api_v1_auth_login_post"},"Body_upload_contract_api_contract_upload_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_contract_api_contract_upload_post"},"ContractDocOut":{"properties":{"title":{"type":"string","title":"Title"},"id":{"type":"integer","title":"Id"},"status":{"type":"string","title":"Status"},"original_file_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original File Path"},"pdf_converted_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pdf Converted Path"},"final_docx_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Final Docx Path"},"metadata_info":{"anyOf":[{"$ref":"#/components/schemas/ContractMetadataSchema"},{"type":"null"}]},"stance":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stance"},"review_items":{"items":{"$ref":"#/components/schemas/ReviewItemOut"},"type":"array","title":"Review Items","default":[]},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["title","id","status","original_file_path","pdf_converted_path","final_docx_path","created_at","updated_at"],"title":"ContractDocOut"},"ContractMetadataSchema":{"properties":{"contract_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contract Name"},"parties":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Parties"},"amount":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Amount"},"contract_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Contract Type"},"core_terms":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Core Terms"}},"type":"object","title":"ContractMetadataSchema"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ReviewItemOut":{"properties":{"issue_type":{"type":"string","title":"Issue Type"},"quote":{"type":"string","title":"Quote"},"explanation":{"type":"string","title":"Explanation"},"suggestion":{"type":"string","title":"Suggestion"},"severity":{"type":"string","title":"Severity"},"action_type":{"type":"string","title":"Action Type","default":"Revision"},"id":{"type":"integer","title":"Id"},"contract_id":{"type":"integer","title":"Contract Id"},"item_status":{"type":"string","title":"Item Status"},"final_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Final Text"},"human_comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Human Comment"}},"type":"object","required":["issue_type","quote","explanation","suggestion","severity","id","contract_id","item_status","final_text","human_comment"],"title":"ReviewItemOut"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"id":{"type":"integer","title":"Id"},"is_admin":{"type":"boolean","title":"Is Admin","default":false}},"type":"object","required":["email","id"],"title":"User"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserCreate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login"}}}}}}
