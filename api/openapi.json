{
    "openapi": "3.1.0",
    "info": {
        "title": "Gradio资产估值计算器API",
        "description": "提供土地估值计算和敏感性分析功能的API接口",
        "version": "1.0.0"
    },
    "paths": {
        "/api/health": {
            "get": {
                "summary": "Api Health",
                "description": "健康检查接口",
                "operationId": "api_health_api_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/": {
            "get": {
                "summary": "Api Health",
                "description": "健康检查接口",
                "operationId": "api_health_api_health_get_v2",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/api/info": {
            "get": {
                "summary": "Api Info",
                "description": "API信息接口",
                "operationId": "api_info_api_info_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "name": {
                                                "type": "string",
                                                "description": "姓名"
                                            },
                                            "age": {
                                                "type": "integer",
                                                "description": "年龄",
                                                "minimum": 0
                                            }
                                        },
                                        "required": [
                                            "name",
                                            "age"
                                        ],
                                        "example": {
                                            "name": "张三",
                                            "age": 25
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/projects": {
            "get": {
                "summary": "项目列表查询",
                "description": "获取项目列表，包含资产信息、拍卖状态等",
                "operationId": "query_project_list",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "页码",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "page_size",
                        "in": "query",
                        "description": "每页数量",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "minimum": 1,
                            "maximum": 100
                        }
                    },
                    {
                        "name": "asset_type",
                        "in": "query",
                        "description": "资产类型筛选",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "city",
                        "in": "query",
                        "description": "城市筛选",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "auction_status",
                        "in": "query",
                        "description": "拍卖状态筛选",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "一拍",
                                "二拍"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 200
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "total": {
                                                    "type": "integer",
                                                    "description": "总记录数",
                                                    "example": 150
                                                },
                                                "page": {
                                                    "type": "integer",
                                                    "description": "当前页码",
                                                    "example": 1
                                                },
                                                "page_size": {
                                                    "type": "integer",
                                                    "description": "每页数量",
                                                    "example": 10
                                                },
                                                "projects": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "description": "项目ID",
                                                                "example": "PROJ001"
                                                            },
                                                            "asset_name": {
                                                                "type": "string",
                                                                "description": "资产名称",
                                                                "example": "某某商业大厦"
                                                            },
                                                            "asset_type": {
                                                                "type": "string",
                                                                "description": "资产类型",
                                                                "example": "商业地产",
                                                                "enum": [
                                                                    "土地"
                                                                ]
                                                            },
                                                            "city": {
                                                                "type": "string",
                                                                "description": "城市",
                                                                "example": "成都市",
                                                                "enum": [
                                                                    "成都市",
                                                                    "自贡市",
                                                                    "攀枝花市",
                                                                    "泸州市",
                                                                    "德阳市",
                                                                    "绵阳市",
                                                                    "广元市",
                                                                    "遂宁市",
                                                                    "内江市",
                                                                    "乐山市",
                                                                    "南充市",
                                                                    "眉山市",
                                                                    "宜宾市",
                                                                    "广安市",
                                                                    "达州市",
                                                                    "雅安市",
                                                                    "巴中市",
                                                                    "资阳市",
                                                                    "阿坝藏族羌族自治州",
                                                                    "甘孜藏族自治州",
                                                                    "凉山彝族自治州"
                                                                ]
                                                            },
                                                            "starting_price": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "description": "起拍价(万元)",
                                                                "example": 1500.5
                                                            },
                                                            "valuation_price": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "description": "估值价(万元)",
                                                                "example": 2000.0
                                                            },
                                                            "valuation_discount_rate": {
                                                                "type": "number",
                                                                "format": "float",
                                                                "description": "估值折扣率",
                                                                "example": 0.75
                                                            },
                                                            "auction_date": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "description": "拍卖日期",
                                                                "example": "2023-12-01T10:00:00Z"
                                                            },
                                                            "auction_status": {
                                                                "type": "string",
                                                                "description": "拍卖状态",
                                                                "enum": [
                                                                    "一拍",
                                                                    "二拍"
                                                                ],
                                                                "example": "一拍"
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "asset_name",
                                                            "asset_type",
                                                            "city",
                                                            "starting_price",
                                                            "valuation_price",
                                                            "valuation_discount_rate",
                                                            "auction_date",
                                                            "auction_status"
                                                        ]
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 400
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "参数错误"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 500
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "服务器内部错误"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/info-extraction": {
            "post": {
                "summary": "信息抽取接口",
                "description": "根据项目ID抽取土地信息和法律信息",
                "operationId": "extract_info_by_project",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "project_id": {
                                        "type": "string",
                                        "description": "项目ID",
                                        "example": "PROJ202310001"
                                    }
                                },
                                "required": [
                                    "project_id"
                                ]
                            },
                            "example": {
                                "project_id": "PROJ202310001"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 200
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "project_id": {
                                                    "type": "string",
                                                    "description": "项目ID",
                                                    "example": "PROJ202310001"
                                                },
                                                "project_name": {
                                                    "type": "string",
                                                    "description": "项目名称",
                                                    "example": "阳谷瑞璟置业土地资产项目"
                                                },
                                                "land_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "land_area_square_meters": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "number"
                                                            },
                                                            "description": "土地面积_平方米",
                                                            "example": [
                                                                63825
                                                            ]
                                                        },
                                                        "land_area_mu": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "number"
                                                            },
                                                            "description": "土地面积_亩",
                                                            "example": [
                                                                95.74
                                                            ]
                                                        },
                                                        "floor_area_ratio": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "description": "容积率",
                                                            "example": [
                                                                "未提及"
                                                            ]
                                                        },
                                                        "calculable_area": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "description": "计容面积",
                                                            "example": [
                                                                "未提及"
                                                            ]
                                                        },
                                                        "commercial_ratio_lower_limit": {
                                                            "type": "string",
                                                            "description": "商业占比_低限",
                                                            "example": "未提及"
                                                        },
                                                        "residential_area": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "description": "住宅面积",
                                                            "example": [
                                                                "未提及"
                                                            ]
                                                        },
                                                        "commercial_area": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            },
                                                            "description": "商业面积",
                                                            "example": [
                                                                "未提及"
                                                            ]
                                                        },
                                                        "address": {
                                                            "type": "string",
                                                            "description": "地址",
                                                            "example": "山东省聊城市阳谷县阳谷伏城文化路南侧 金光大道西侧"
                                                        }
                                                    }
                                                },
                                                "legal_info": {
                                                    "type": "object",
                                                    "properties": {
                                                        "right_holder_name": {
                                                            "type": "string",
                                                            "description": "权利人名称",
                                                            "example": "阳谷瑞璟置业有限公司"
                                                        },
                                                        "property_certificate_number": {
                                                            "type": "string",
                                                            "description": "产权证号",
                                                            "example": "鲁(2020)阳谷县不动产权第0001003号"
                                                        },
                                                        "land_transfer_contract": {
                                                            "type": "string",
                                                            "description": "土地出让合同",
                                                            "example": "未提及"
                                                        },
                                                        "mortgage_status": {
                                                            "type": "string",
                                                            "description": "抵押情况",
                                                            "example": "有抵押"
                                                        },
                                                        "pledge_status": {
                                                            "type": "string",
                                                            "description": "质押情况",
                                                            "example": "未提及"
                                                        },
                                                        "seizure_status": {
                                                            "type": "string",
                                                            "description": "查封情况",
                                                            "example": "有查封"
                                                        },
                                                        "freeze_status": {
                                                            "type": "string",
                                                            "description": "冻结情况",
                                                            "example": "未提及"
                                                        },
                                                        "risk_transfer_status": {
                                                            "type": "string",
                                                            "description": "风险转移情况",
                                                            "example": "未提及"
                                                        },
                                                        "tax_burden_party": {
                                                            "type": "string",
                                                            "description": "税负承担方",
                                                            "example": "未提及"
                                                        },
                                                        "tax_status": {
                                                            "type": "string",
                                                            "description": "税费情况",
                                                            "example": "未提及"
                                                        }
                                                    }
                                                },
                                                "extraction_confidence": {
                                                    "type": "object",
                                                    "properties": {
                                                        "overall": {
                                                            "type": "number",
                                                            "description": "整体抽取置信度",
                                                            "minimum": 0,
                                                            "maximum": 1,
                                                            "example": 0.85
                                                        },
                                                        "land_info": {
                                                            "type": "number",
                                                            "description": "土地信息抽取置信度",
                                                            "minimum": 0,
                                                            "maximum": 1,
                                                            "example": 0.9
                                                        },
                                                        "legal_info": {
                                                            "type": "number",
                                                            "description": "法律信息抽取置信度",
                                                            "minimum": 0,
                                                            "maximum": 1,
                                                            "example": 0.8
                                                        }
                                                    }
                                                },
                                                "extraction_time": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "抽取时间",
                                                    "example": "2023-10-01T15:30:00Z"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 400
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "请求参数错误"
                                        },
                                        "details": {
                                            "type": "object",
                                            "example": {
                                                "project_id": "项目ID不能为空"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 404
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "项目不存在"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 500
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "信息抽取处理失败"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/upload": {
            "post": {
                "summary": "文件上传接口",
                "description": "通过本地文件路径上传文件，自动生成项目ID",
                "operationId": "upload_files_by_path",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "file_paths": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "description": "本地文件路径列表",
                                        "minItems": 1,
                                        "maxItems": 20,
                                        "example": [
                                            "C:/documents/土地权属证明.pdf",
                                            "D:/project/images/地块照片.jpg",
                                            "/home/user/contracts/出让合同.docx"
                                        ]
                                    },
                                    "file_type": {
                                        "type": "string",
                                        "description": "文件类型",
                                        "enum": [
                                            "land_document",
                                            "legal_document",
                                            "image",
                                            "contract",
                                            "other"
                                        ],
                                        "example": "land_document"
                                    }
                                },
                                "required": [
                                    "file_paths"
                                ]
                            },
                            "example": {
                                "file_paths": [
                                    "C:/documents/土地权属证明.pdf",
                                    "D:/project/images/地块照片.jpg"
                                ],
                                "file_type": "land_document"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 200
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "文件上传成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "project_id": {
                                                    "type": "string",
                                                    "description": "自动生成的项目ID",
                                                    "example": "PROJ_20231001_123456"
                                                },
                                                "total_files": {
                                                    "type": "integer",
                                                    "description": "总文件数",
                                                    "example": 2
                                                },
                                                "total_size": {
                                                    "type": "integer",
                                                    "description": "总文件大小(字节)",
                                                    "example": 5242880
                                                },
                                                "upload_time": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "上传时间",
                                                    "example": "2023-10-01T15:30:00Z"
                                                },
                                                "files": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "file_id": {
                                                                "type": "string",
                                                                "description": "文件唯一ID",
                                                                "example": "FILE_123456789"
                                                            },
                                                            "original_path": {
                                                                "type": "string",
                                                                "description": "原始文件路径",
                                                                "example": "C:/documents/土地权属证明.pdf"
                                                            },
                                                            "filename": {
                                                                "type": "string",
                                                                "description": "文件名称",
                                                                "example": "土地权属证明.pdf"
                                                            },
                                                            "file_type": {
                                                                "type": "string",
                                                                "description": "文件类型",
                                                                "enum": [
                                                                    "land_document",
                                                                    "legal_document",
                                                                    "image",
                                                                    "contract",
                                                                    "other"
                                                                ],
                                                                "example": "land_document"
                                                            },
                                                            "file_size": {
                                                                "type": "integer",
                                                                "description": "文件大小(字节)",
                                                                "example": 2048576
                                                            },
                                                            "file_extension": {
                                                                "type": "string",
                                                                "description": "文件扩展名",
                                                                "example": "pdf"
                                                            },
                                                            "mime_type": {
                                                                "type": "string",
                                                                "description": "MIME类型",
                                                                "example": "application/pdf"
                                                            },
                                                            "create_time": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "description": "创建时间",
                                                                "example": "2023-10-01T15:30:00Z"
                                                            },
                                                            "access_url": {
                                                                "type": "string",
                                                                "description": "文件访问URL",
                                                                "example": "https://cdn.example.com/files/PROJ_20231001_123456/土地权属证明.pdf"
                                                            },
                                                            "thumbnail_url": {
                                                                "type": "string",
                                                                "description": "缩略图URL(仅图片文件)",
                                                                "example": "https://cdn.example.com/thumbnails/PROJ_20231001_123456/土地权属证明.jpg"
                                                            },
                                                            "upload_status": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "success",
                                                                    "failed"
                                                                ],
                                                                "description": "上传状态",
                                                                "example": "success"
                                                            },
                                                            "error_message": {
                                                                "type": "string",
                                                                "description": "错误信息(上传失败时)",
                                                                "example": ""
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 400
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "文件上传失败"
                                        },
                                        "details": {
                                            "type": "object",
                                            "properties": {
                                                "error_files": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "file_path": {
                                                                "type": "string",
                                                                "example": "C:/documents/不存在的文件.pdf"
                                                            },
                                                            "error": {
                                                                "type": "string",
                                                                "example": "文件不存在"
                                                            }
                                                        }
                                                    }
                                                },
                                                "success_count": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "failed_count": {
                                                    "type": "integer",
                                                    "example": 1
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "413": {
                        "description": "Payload Too Large",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 413
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "文件总大小超过限制"
                                        },
                                        "details": {
                                            "type": "object",
                                            "properties": {
                                                "max_total_size": {
                                                    "type": "integer",
                                                    "example": 104857600
                                                },
                                                "current_total_size": {
                                                    "type": "integer",
                                                    "example": 157286400
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/batch-update": {
            "post": {
                "summary": "批量更新参数",
                "description": "批量更新项目参数，支持多个字段同时更新",
                "operationId": "batch_update_parameters",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "updates": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "project_id": {
                                                    "type": "string",
                                                    "description": "项目ID",
                                                    "example": "PROJ202310001"
                                                },
                                                "updates": {
                                                    "type": "object",
                                                    "description": "字段更新键值对",
                                                    "additionalProperties": {
                                                        "type": [
                                                            "string",
                                                            "number",
                                                            "boolean",
                                                            "null"
                                                        ]
                                                    },
                                                    "example": {
                                                        "starting_price": 1600.0,
                                                        "valuation_price": 2100.0,
                                                        "auction_status": "一拍",
                                                        "description": "更新后的项目描述"
                                                    }
                                                }
                                            },
                                            "required": [
                                                "project_id",
                                                "updates"
                                            ]
                                        },
                                        "minItems": 1,
                                        "maxItems": 100,
                                        "description": "批量更新列表"
                                    }
                                },
                                "required": [
                                    "updates"
                                ]
                            },
                            "example": {
                                "updates": [
                                    {
                                        "project_id": "PROJ202310001",
                                        "updates": {
                                            "starting_price": 1600.0,
                                            "valuation_price": 2100.0,
                                            "auction_status": "一拍"
                                        }
                                    },
                                    {
                                        "project_id": "PROJ202310002",
                                        "updates": {
                                            "city": "重庆市",
                                            "asset_name": "重庆江北商业地块",
                                            "priority": 3
                                        }
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 200
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "批量更新成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "total_count": {
                                                    "type": "integer",
                                                    "description": "总更新项目数",
                                                    "example": 2
                                                },
                                                "success_count": {
                                                    "type": "integer",
                                                    "description": "成功更新项目数",
                                                    "example": 2
                                                },
                                                "failed_count": {
                                                    "type": "integer",
                                                    "description": "失败更新项目数",
                                                    "example": 0
                                                },
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "project_id": {
                                                                "type": "string",
                                                                "description": "项目ID",
                                                                "example": "PROJ202310001"
                                                            },
                                                            "status": {
                                                                "type": "string",
                                                                "enum": [
                                                                    "success",
                                                                    "failed"
                                                                ],
                                                                "description": "更新状态",
                                                                "example": "success"
                                                            },
                                                            "updated_fields": {
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "string"
                                                                },
                                                                "description": "成功更新的字段列表",
                                                                "example": [
                                                                    "starting_price",
                                                                    "valuation_price",
                                                                    "auction_status"
                                                                ]
                                                            },
                                                            "failed_fields": {
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "field_name": {
                                                                            "type": "string",
                                                                            "example": "invalid_field"
                                                                        },
                                                                        "error": {
                                                                            "type": "string",
                                                                            "example": "字段不存在"
                                                                        }
                                                                    }
                                                                },
                                                                "description": "更新失败的字段列表"
                                                            },
                                                            "error_message": {
                                                                "type": "string",
                                                                "description": "错误信息",
                                                                "example": ""
                                                            },
                                                            "update_time": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "description": "更新时间",
                                                                "example": "2023-10-01T15:30:00Z"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 400
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "参数验证失败"
                                        },
                                        "details": {
                                            "type": "object",
                                            "properties": {
                                                "invalid_projects": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "project_id": {
                                                                "type": "string",
                                                                "example": "PROJ202310999"
                                                            },
                                                            "error": {
                                                                "type": "string",
                                                                "example": "项目不存在"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "207": {
                        "description": "Multi-Status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 207
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "部分更新成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "total_count": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "success_count": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "failed_count": {
                                                    "type": "integer",
                                                    "example": 2
                                                },
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/UpdateResult"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/tasks/parse": {
            "post": {
                "summary": "创建解析任务",
                "description": "用户点击解析按钮时创建解析任务，返回任务状态信息",
                "operationId": "create_parse_task",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "project_id": {
                                        "type": "string",
                                        "description": "项目ID",
                                        "example": "PROJ202310001"
                                    },
                                    "file_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "description": "需要解析的文件ID列表",
                                        "example": [
                                            "FILE_123456789",
                                            "FILE_123456790"
                                        ]
                                    },
                                    "parse_type": {
                                        "type": "string",
                                        "description": "解析类型",
                                        "enum": [
                                            "land_info",
                                            "legal_info",
                                            "all"
                                        ],
                                        "default": "all",
                                        "example": "all"
                                    },
                                    "priority": {
                                        "type": "integer",
                                        "description": "任务优先级",
                                        "minimum": 1,
                                        "maximum": 10,
                                        "default": 5,
                                        "example": 5
                                    }
                                },
                                "required": [
                                    "project_id"
                                ]
                            },
                            "example": {
                                "project_id": "PROJ202310001",
                                "file_ids": [
                                    "FILE_123456789",
                                    "FILE_123456790"
                                ],
                                "parse_type": "all",
                                "priority": 5
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 200
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "任务创建成功"
                                        },
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "task_id": {
                                                    "type": "string",
                                                    "description": "任务ID",
                                                    "example": "TASK_20231001_123456"
                                                },
                                                "project_id": {
                                                    "type": "string",
                                                    "description": "项目ID",
                                                    "example": "PROJ202310001"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "pending",
                                                        "starting",
                                                        "processing",
                                                        "completed",
                                                        "failed"
                                                    ],
                                                    "description": "任务状态",
                                                    "example": "pending"
                                                },
                                                "create_time": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "任务创建时间",
                                                    "example": "2023-10-01T15:30:00Z"
                                                },
                                                "start_time": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "任务开始时间",
                                                    "example": null
                                                },
                                                "complete_time": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "description": "任务完成时间",
                                                    "example": null
                                                },
                                                "estimated_duration": {
                                                    "type": "integer",
                                                    "description": "预估耗时(秒)",
                                                    "example": 60
                                                },
                                                "progress": {
                                                    "type": "number",
                                                    "description": "任务进度(0-1)",
                                                    "minimum": 0,
                                                    "maximum": 1,
                                                    "example": 0
                                                },
                                                "file_count": {
                                                    "type": "integer",
                                                    "description": "需要解析的文件数量",
                                                    "example": 2
                                                },
                                                "parse_type": {
                                                    "type": "string",
                                                    "description": "解析类型",
                                                    "example": "all"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "code": {
                                            "type": "integer",
                                            "example": 400
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "任务创建失败"
                                        },
                                        "details": {
                                            "type": "object",
                                            "properties": {
                                                "error": {
                                                    "type": "string",
                                                    "example": "项目不存在"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "FieldConfirmRequest": {
                "properties": {
                    "confirm_fields": {
                        "type": "boolean",
                        "title": "Confirm Fields",
                        "default": true
                    }
                },
                "type": "object",
                "title": "FieldConfirmRequest"
            },
            "FieldUpdateRequest": {
                "properties": {
                    "field_name": {
                        "type": "string",
                        "title": "Field Name"
                    },
                    "new_value": {
                        "type": "number",
                        "title": "New Value"
                    }
                },
                "type": "object",
                "required": [
                    "field_name",
                    "new_value"
                ],
                "title": "FieldUpdateRequest"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "SensitivityRequest": {
                "properties": {
                    "base_params": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/ValuationRequest"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    },
                    "steps": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Steps",
                        "default": 11
                    }
                },
                "type": "object",
                "title": "SensitivityRequest"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            },
            "ValuationRequest": {
                "properties": {
                    "land_area_sqm": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Land Area Sqm"
                    },
                    "plot_ratio": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Plot Ratio"
                    },
                    "commercial_share_min": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Commercial Share Min"
                    },
                    "market_price_residential_per_sqm": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Market Price Residential Per Sqm"
                    },
                    "market_price_commercial_per_sqm": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Market Price Commercial Per Sqm"
                    },
                    "vat_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Vat Rate"
                    },
                    "surcharge_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Surcharge Rate"
                    },
                    "deed_tax_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Deed Tax Rate"
                    },
                    "stamp_duty_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Stamp Duty Rate"
                    },
                    "infra_fee_per_sqm": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Infra Fee Per Sqm"
                    },
                    "hard_cost_unit_price_per_sqm": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Hard Cost Unit Price Per Sqm"
                    },
                    "selling_expense_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Selling Expense Rate"
                    },
                    "admin_expense_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Admin Expense Rate"
                    },
                    "target_profit_rate": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Target Profit Rate"
                    }
                },
                "type": "object",
                "title": "ValuationRequest"
            },
            "UpdateResult": {
                "properties": {
                    "project_id": {
                        "type": "string",
                        "description": "项目ID",
                        "example": "PROJ202310001"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "success",
                            "failed"
                        ],
                        "description": "更新状态",
                        "example": "success"
                    },
                    "updated_fields": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "成功更新的字段列表",
                        "example": [
                            "starting_price",
                            "valuation_price",
                            "auction_status"
                        ]
                    },
                    "failed_fields": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "field_name": {
                                    "type": "string",
                                    "example": "invalid_field"
                                },
                                "error": {
                                    "type": "string",
                                    "example": "字段不存在"
                                }
                            }
                        },
                        "description": "更新失败的字段列表"
                    },
                    "error_message": {
                        "type": "string",
                        "description": "错误信息",
                        "example": ""
                    },
                    "update_time": {
                        "type": "string",
                        "format": "date-time",
                        "description": "更新时间",
                        "example": "2023-10-01T15:30:00Z"
                    }
                },
                "type": "object",
                "required": [
                    "project_id",
                    "status"
                ],
                "title": "UpdateResult"
            }
        }
    }
}