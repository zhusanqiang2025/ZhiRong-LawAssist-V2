# ==================================
# 法律文书生成助手 - Docker 环境变量配置
# ==================================
# 使用方法：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 修改下面的配置值填入您的实际配置
# 3. 运行: docker-compose up -d

# ==================================
# 基础配置
# ==================================
ENVIRONMENT=production

# ==================================
# 默认管理员账户
# ==================================
# ⚠️  重要: 生产环境请务必设置 DEFAULT_ADMIN_PASSWORD
# 首次启动后会自动创建管理员账户
# 如果不设置密码，系统会生成随机密码并记录在日志中
DEFAULT_ADMIN_EMAIL=admin@example.com
# DEFAULT_ADMIN_PASSWORD=YourStrongPassword123!

# ==================================
# 生产环境数据种子配置
# ==================================
# 应用启动时自动初始化系统数据（管理员、规则、知识图谱）
# SEED_ADMIN_EMAIL: 管理员邮箱（必需）
# SEED_ADMIN_PASSWORD: 管理员密码（必需，至少8位）
SEED_ADMIN_EMAIL=admin@example.com
SEED_ADMIN_PASSWORD=YourStrongPassword123!

# ==================================
# 数据库配置 (PostgreSQL)
# ==================================
POSTGRES_SERVER=db
POSTGRES_DB=legal_assistant_db
POSTGRES_USER=admin
POSTGRES_PASSWORD=ChangeThisPassword123!

# 后端数据库连接 URL（Docker 内部网络）
DATABASE_URL=postgresql://admin:ChangeThisPassword123@db:5432/legal_assistant_db

# ==================================
# Redis 配置
# ==================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ==================================
# 应用安全配置
# ==================================
# ⚠️  重要: 生产环境请务必修改以下密钥为强随机字符串
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=a_very_long_and_super_secret_random_string_please_change_this

# JWT 访问令牌过期时间 (秒)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# ==================================
# ONLYOFFICE 文档服务配置
# ==================================
# ⚠️  重要: 请修改为强随机字符串
ONLYOFFICE_JWT_SECRET=changeme_onlyoffice_jwt_secret_please_generate_random_string
BACKEND_PUBLIC_URL=http://localhost:8000
# 前端访问地址（用于飞书通知跳转到前端审查结果页面）
FRONTEND_PUBLIC_URL=http://localhost:5173
# 额外的允许跨域访问地址（可选，逗号分隔）
# 例如：https://example.com,https://app.example.com
ALLOWED_ORIGINS=

# ==================================
# AI 模型配置 (LangChain)
# ==================================
# 请根据您使用的 AI 服务配置以下信息

# LangChain API 配置
LANGCHAIN_API_KEY=your-api-key-here
LANGCHAIN_API_BASE_URL=https://api.openai.com/v1
MODEL_NAME=gpt-4o-mini

# OpenAI 兼容 API 配置（用于合同生成模块）
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1

# ==================================
# 文档处理服务配置
# ==================================
# MinerU PDF 解析服务（可选）
MINERU_API_URL=http://your-mineru-service:7231/v2/parse/file
MINERU_API_TIMEOUT=120
MINERU_ENABLED=false

# OCR 服务（可选）
OCR_API_URL=http://your-ocr-service:8002/ocr/v1/recognize-text
OCR_API_TIMEOUT=60
OCR_ENABLED=false

# AI 文档后处理（可选）
AI_POSTPROCESS_ENABLED=false
AI_POSTPROCESS_MODEL=qwen3-vl:32b-thinking
AI_POSTPROCESS_API_URL=http://your-ai-service:11434/v1
AI_POSTPROCESS_API_KEY=
AI_POSTPROCESS_TIMEOUT=30

# ==================================
# Dify 工作流配置（可选）
# ==================================
DIFY_ENABLED=false
DIFY_GUIDANCE_ANALYSIS_ENABLED=false
DIFY_EXPERT_CONSULTATION_ENABLED=false

# Dify API 配置（如需启用 Dify，请填写）
DIFY_API_URL=http://your-dify-server/v1
DIFY_API_BASE_URL=http://your-dify-server/v1

# ==================================
# 注意事项
# ==================================
# 1. 所有密码和密钥请务必修改为强密码
# 2. 生产环境请使用环境变量或密钥管理工具
# 3. BACKEND_PUBLIC_URL 需要改为实际的服务器地址
# 4. FRONTEND_PUBLIC_URL 需要改为实际的前端访问地址（用于飞书通知跳转和 CORS）
# 5. ALLOWED_ORIGINS 可选，用于添加额外的允许跨域访问的地址（逗号分隔）
# 6. 确保 docker-compose.yml 中的端口映射与您的网络环境匹配
