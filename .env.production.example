# ==================================
# 法律文书生成助手 - 生产环境配置模板
# ==================================
# 使用方法：
# 1. 在 CI/CD 系统中创建 .env 文件并填入实际配置值
# 2. 或者将此文件复制为 .env.production 后修改配置

# ==================================
# 基础配置
# ==================================
ENVIRONMENT=production

# ==================================
# 默认管理员账户
# ==================================
DEFAULT_ADMIN_EMAIL=admin@example.com
# DEFAULT_ADMIN_PASSWORD=YourStrongPassword123!

# ==================================
# 数据库配置 (PostgreSQL)
# ==================================
POSTGRES_SERVER=db
POSTGRES_DB=legal_assistant_db
POSTGRES_USER=admin
POSTGRES_PASSWORD=ChangeThisPassword123!

DATABASE_URL=postgresql://admin:ChangeThisPassword123@db:5432/legal_assistant_db

# ==================================
# Redis 配置
# ==================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://redis:6379/0

# ==================================
# 应用安全配置
# ==================================
SECRET_KEY=a_very_long_and_super_secret_random_string_please_change_this
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# ==================================
# ONLYOFFICE 文档服务配置
# ==================================
ONLYOFFICE_JWT_SECRET=changeme_onlyoffice_jwt_secret_please_generate_random_string

# 后端公网访问地址（需要修改为实际部署服务器地址）
BACKEND_PUBLIC_URL=http://your-server-ip:9000

# ==================================
# 🤖 AI 模型配置 - 核心配置！
# ==================================
# ⚠️ 重要提示：必须配置以下 AI 模型 API 密钥，否则所有 AI 功能将无法使用！
#
# 本系统支持多种 AI 模型 API，根据功能模块使用不同的 API：
#
# 1. LANGCHAIN_API_* 用于风险评估、文档预整理等核心 AI 功能
# 2. OPENAI_API_* 用于合同生成模块
# 3. DEEPSEEK_API_* 用于智能对话功能
#
# ==================================
# 1️⃣ LangChain API 配置（用于风险评估等核心功能）
# ==================================
LANGCHAIN_API_KEY=your-api-key-here
LANGCHAIN_API_BASE_URL=https://api.openai.com/v1
MODEL_NAME=gpt-4o-mini

# 示例：使用火山引擎 Qwen 模型
# LANGCHAIN_API_KEY=your-volcano-engine-api-key
# LANGCHAIN_API_BASE_URL=https://sd-xxx.volcengineapi.com/v1
# MODEL_NAME=Qwen3-235B-A22B-Thinking-2507

# ==================================
# 2️⃣ OpenAI 兼容 API 配置（用于合同生成模块）
# ==================================
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1

# ==================================
# 3️⃣ DeepSeek API 配置（用于智能对话功能）
# ==================================
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_API_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_TEMPERATURE=0.7
DEEPSEEK_MAX_TOKENS=2000
DEEPSEEK_TIMEOUT=60

# ==================================
# 🧠 BGE 嵌入模型配置（用于向量检索）
# ==================================
BGE_EMBEDDING_API_URL=http://115.190.43.141:11434/api/embed
BGE_RERANKER_API_URL=http://115.190.43.141:9997/v1/rerank
BGE_MODEL_NAME=bge-m3
BGE_EMBEDDING_DIM=1024
BGE_TIMEOUT=30

# ==================================
# 文档处理服务配置
# ==================================
MINERU_API_URL=http://your-mineru-service:7231/v2/parse/file
MINERU_API_TIMEOUT=120
MINERU_ENABLED=false

OCR_API_URL=http://your-ocr-service:8002/ocr/v1/recognize-text
OCR_API_TIMEOUT=60
OCR_ENABLED=false

AI_POSTPROCESS_ENABLED=false
AI_POSTPROCESS_MODEL=qwen3-vl:32b-thinking
AI_POSTPROCESS_API_URL=http://your-ai-service:11434/v1
AI_POSTPROCESS_API_KEY=
AI_POSTPROCESS_TIMEOUT=30
AI_POSTPROCESS_BATCH_SIZE=5
AI_POSTPROCESS_CONFIDENCE_THRESHOLD=0.7
AI_POSTPROCESS_ONLY_AMBIGUOUS=true

# ==================================
# 前端构建配置（在 docker-compose build 时使用）
# ==================================
# 前端部署基础路径（Kubernetes 子路径部署时使用，默认为根路径）
VITE_BASE_PATH=/

# 前端访问后端的 API 地址（需要修改为实际部署服务器地址）
VITE_API_BASE_URL=http://your-server-ip:9000
VITE_ONLYOFFICE_URL=http://your-server-ip:8083

# ==================================
# Celery 配置（如果启用）
# ==================================
CELERY_ENABLED=false
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
FLOWER_PORT=5556

# ==================================
# Dify 工作流配置（可选）
# ==================================
DIFY_ENABLED=false
DIFY_GUIDANCE_ANALYSIS_ENABLED=false
DIFY_EXPERT_CONSULTATION_ENABLED=false
DIFY_API_URL=http://your-dify-server/v1
DIFY_API_BASE_URL=http://your-dify-server/v1
